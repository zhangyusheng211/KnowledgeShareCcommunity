server:
  port: ${SERVER_PORT:8609}

# 需要启动 plumelog
plumelog:
  url: 127.0.0.1:8613
  enable: false

spring:
  application:
    name: mogu-wechat
  cloud:
    nacos:
      username: ${SPRING_CLOUD_NACOS_USERNAME:nacos}
      password: ${SPRING_CLOUD_NACOS_PASSWORD:nacos}
      discovery:
        server-addr: ${SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR:localhost:8848}
        namespace: ${SPRING_CLOUD_NACOS_DISCOVERY_NAMESPACE:dev}
      config:
        server-addr: ${SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR:localhost:8848}
        file-extension: ${SPRING_CLOUD_NACOS_CONFIG_FILE_EXTENSION:yaml}
        #指定分组
        group: ${SPRING_CLOUD_NACOS_CONFIG_GROUP:dev}
        #指定命名空间
        namespace: ${SPRING_CLOUD_NACOS_CONFIG_NAMESPACE:dev}

    # 配置Sentinel流控
    sentinel:
      transport:
        #配置Sentinel dashboard地址
        dashboard: ${SPRING_CLOUD_SENTINEL_TRANSPORT_DASHBOARD:localhost:8612}
        #默认8719端口,如果被占用会向上扫描。
        port: 8719

      # sentinel持久化到nacos
      datasource:
        flow:
          nacos:
            # nacos连接地址
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            # nacos中的配置名称
            data-id: ${spring.application.name}-flow-rules
            group-id: RULE_GROUP
            data-type: json
            rule-type: flow
            namespace: role
            username: ${spring.cloud.nacos.username}
            password: ${spring.cloud.nacos.password}

        degrade:
          nacos:
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            data-id: ${spring.application.name}-degrade-rules
            group-id: RULE_GROUP
            data-type: json
            rule-type: degrade
            namespace: role
            username: ${spring.cloud.nacos.username}
            password: ${spring.cloud.nacos.password}
